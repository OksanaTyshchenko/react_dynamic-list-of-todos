{"version":3,"sources":["components/TodoList/TodoList.tsx","api.ts","components/CurrentUser/CurrentUser.tsx","App.tsx","index.tsx"],"names":["TodoList","todos","selectUser","selectedUserId","useState","query","setQuery","appliedQuery","setAppliedQuery","status","setStatus","random","setRandom","applyQuery","useCallback","f","delay","timerId","clearTimeout","args","setTimeout","debounce","readyTodos","filteredTodos","filter","title","toLowerCase","includes","completed","todosForRender","renderTodos","array","newArr","i","length","j","Math","floor","randomize","className","type","value","onChange","event","target","onClick","state","map","userId","id","classNames","readOnly","API_URL","a","fetch","response","json","CurrentUser","user","setUser","useEffect","getUser","then","newUser","name","email","phone","App","setSelectedUserId","setTodos","getTodos","allTodos","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0a2d5931.chunk.js","sourcesContent":["import React, {\n  ChangeEvent,\n  useState,\n  useCallback,\n} from 'react';\nimport './TodoList.scss';\nimport classNames from 'classnames';\n\ntype Props = {\n  todos: Todo[];\n  selectUser: (id: number) => void;\n  selectedUserId: number;\n};\n\ntype FuncArg = (v: string) => void;\n\nconst debounce = (f: FuncArg, delay: number) => {\n  let timerId: number;\n\n  return (...args: string[]) => {\n    clearTimeout(timerId);\n    timerId = setTimeout(f, delay, ...args);\n  };\n};\n\nexport const TodoList: React.FC<Props> = ({\n  todos,\n  selectUser,\n  selectedUserId,\n}) => {\n  const [query, setQuery] = useState('');\n  const [appliedQuery, setAppliedQuery] = useState('');\n  const [status, setStatus] = useState('All');\n  const [random, setRandom] = useState(false);\n\n  const applyQuery = useCallback(\n    debounce(setAppliedQuery, 1000),\n    [],\n  );\n\n  const filterTitle = (event: ChangeEvent<HTMLInputElement>) => {\n    const { value } = event.target;\n\n    setQuery(value);\n    applyQuery(value);\n  };\n\n  const changeStatus = (event: ChangeEvent<HTMLSelectElement>) => {\n    const { value } = event.target;\n\n    setStatus(value);\n  };\n\n  const todosForRender = () => {\n    const filteredTodos = todos.filter(({ title }) => {\n      const changeTitle = title.toLowerCase();\n\n      return changeTitle.includes(appliedQuery.toLowerCase());\n    });\n\n    switch (status) {\n      case 'Active':\n        return filteredTodos.filter(({ completed }) => !completed);\n\n      case 'Completed':\n        return filteredTodos.filter(({ completed }) => completed);\n\n      default:\n        return filteredTodos;\n    }\n  };\n\n  const randomize = (array: Todo[]) => {\n    const newArr = [...array];\n\n    for (let i = newArr.length - 1; i > 0; i -= 1) {\n      const j = Math.floor(Math.random() * (i + 1));\n\n      [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n    }\n\n    return newArr;\n  };\n\n  const readyTodos = todosForRender();\n  const renderTodos = random ? randomize(readyTodos) : readyTodos;\n\n  return (\n    <div className=\"TodoList\">\n      <h2>Todos:</h2>\n      <p>Search by title</p>\n      <label>\n        <input type=\"text\" value={query} onChange={filterTitle} />\n      </label>\n      <select\n        value={status}\n        onChange={changeStatus}\n        className=\"TodoList__select\"\n      >\n        <option>All</option>\n        <option>Active</option>\n        <option>Completed</option>\n      </select>\n\n      <button\n        type=\"button\"\n        onClick={() => setRandom(state => !state)}\n        className=\"TodoList__random\"\n      >\n        Randomize\n      </button>\n\n      <div className=\"TodoList__list-container\">\n        <ul className=\"TodoList__list\" data-cy=\"listOfTodos\">\n          {renderTodos.map(({\n            userId,\n            completed,\n            title,\n            id,\n          }) => (\n            <li\n              className={classNames(\n                'TodoList__item',\n                { 'TodoList__item--checked': completed },\n                { 'TodoList__item--unchecked': !completed },\n              )}\n              key={id}\n            >\n              <label>\n                <input type=\"checkbox\" readOnly />\n                <p>{title}</p>\n              </label>\n\n              <button\n                data-cy=\"userButton\"\n                className={classNames('TodoList__user-button button', {\n                  'TodoList__user-button--selected': userId === selectedUserId,\n                })}\n                type=\"button\"\n                onClick={() => selectUser(userId)}\n              >\n                {`User ${userId}`}\n              </button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n","const API_URL = 'https://mate.academy/students-api';\n\nexport async function getTodos(): Promise<Todo[]> {\n  const response = await fetch(`${API_URL}/todos`);\n  const json = await response.json();\n\n  return json;\n}\n\nexport async function getUser(userId: number): Promise<User> {\n  const response = await fetch(`${API_URL}/users/${userId}`);\n  const json = await response.json();\n\n  return json;\n}\n","import React, { useState, useEffect } from 'react';\nimport './CurrentUser.scss';\nimport { getUser } from '../../api';\n\ntype Props = {\n  userId: number;\n  selectUser: (id: number) => void;\n};\n\nexport const CurrentUser: React.FC<Props> = ({ userId, selectUser }) => {\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    getUser(userId)\n      .then(newUser => setUser(newUser));\n  }, [userId]);\n\n  return (\n    <>\n      {user && (\n        <div className=\"CurrentUser\">\n          <h2 className=\"CurrentUser__title\">\n            <span>{`Selected user: ${user.id}`}</span>\n          </h2>\n\n          <h3 className=\"CurrentUser__name\" data-cy=\"userName\">{user.name}</h3>\n          <p className=\"CurrentUser__email\">{user.email}</p>\n          <p className=\"CurrentUser__phone\">{user.phone}</p>\n        </div>\n      )}\n      <button\n        type=\"button\"\n        onClick={() => selectUser(0)}\n        className=\"CurrentUser__clear\"\n      >\n        Clear\n      </button>\n    </>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { TodoList } from './components/TodoList';\nimport { CurrentUser } from './components/CurrentUser';\nimport { getTodos } from './api';\n\nconst App: React.FC = () => {\n  const [\n    selectedUserId,\n    setSelectedUserId,\n  ] = useState(0);\n\n  const [todos, setTodos] = useState<Todo[]>([]);\n\n  useEffect(() => {\n    getTodos()\n      .then(allTodos => setTodos(allTodos));\n  }, []);\n\n  const selectUser = (userId: number) => {\n    setSelectedUserId(userId);\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"App__sidebar\">\n        <TodoList\n          todos={todos}\n          selectUser={selectUser}\n          selectedUserId={selectedUserId}\n        />\n      </div>\n\n      <div className=\"App__content\">\n        <div className=\"App__content-container\">\n          {selectedUserId ? (\n            <CurrentUser\n              userId={selectedUserId}\n              selectUser={selectUser}\n            />\n          ) : 'No user selected'}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}